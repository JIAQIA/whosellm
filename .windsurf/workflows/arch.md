---
description: 当前项目的架构设计说明
---

背景：

当前大模型的厂商（provider）/版本(3.5/4.0/4)/型号(flash/mini/o)混乱不堪
不同厂商，不同版本，不同型号其能力又不尽相同

比如以智谱AI的GLM-4V来讲，它支持视觉多模态，但其接口中传入的视频有如下要求：
GLM-4V-Plus视频大小限制为20M以内，视频时长不超过 30s。
GLM-4V-Plus-0111视频大小限制为 200M 以内。
图片有如下要求：
图片url或者base64编码。
图像大小上传限制为每张图像 5M以下，且像素不超过 6000*6000。
支持jpg、png、jpeg格式。
说明： GLM-4V-Flash 不支持base64编码

这些要求非常细碎，开发者将非常难以处理这些“变态”的要求。一个不小心就会触发警告，同时如果开发者有适配多个模型的需求，这些不同厂商API之间的要求将是恶梦。

当前的项目目标是完成以下要求：

1. 仅需要一个字符串即可完成这个模型配置的初始化。
2. 初始化完成后，可以自动匹配到厂商/版本/型号，同时可以基于同一厂商下的不同版本/型号进行大小比较，支持运算符比较。
3. 初始化完成后，提供其能力范围说明，初期能力范围主要着重「是否支持thinking（reasoning）模式, 是否支持图片，是否支持音频，是否支持视频，是否支持PDF」
4. 针对具体的模型，提供一个对请求参数进行validate的可选实现，用于解决像GLM-4V-Plus这样的变态参数要求自动整改。这个实现会基于我们vrl-python库，使用VRL脚本语言实现。（使用 uv add vrl-python即可添加）

---

当前项目使用uv管理依赖
使用ruff进行格式检查
使用mypy进行类型检查
使用bump-my-version管理版本